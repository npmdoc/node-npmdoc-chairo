<div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a

        href="https://github.com/hapijs/chairo#readme"

    >chairo (v3.0.0)</a>
</h1>
<h4>Seneca micro-services plugin for hapi</h4>
<div class="apidocSectionDiv"><a
    href="#apidoc.tableOfContents"
    id="apidoc.tableOfContents"
><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.chairo">module chairo</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.chairo.register">
            function <span class="apidocSignatureSpan">chairo.</span>register
            <span class="apidocSignatureSpan">(server, options, next)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">chairo.</span>schema</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.chairo.schema">module chairo.schema</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.chairo.schema.action">
            function <span class="apidocSignatureSpan">chairo.schema.</span>action
            <span class="apidocSignatureSpan">(options, message)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.chairo.schema.compose">
            function <span class="apidocSignatureSpan">chairo.schema.</span>compose
            <span class="apidocSignatureSpan">(options, message)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.chairo" id="apidoc.module.chairo">module chairo</a></h1>


    <h2>
        <a href="#apidoc.element.chairo.register" id="apidoc.element.chairo.register">
        function <span class="apidocSignatureSpan">chairo.</span>register
        <span class="apidocSignatureSpan">(server, options, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">register = function (server, options, next) {

    const settings = Hoek.applyToDefaults(internals.defaults, options);

    const hasSeneca = settings.seneca &#x26;&#x26; (typeof settings.seneca.use === &#x27;function&#x27;);
    const seneca = hasSeneca ? settings.seneca : Seneca(settings);

    server.decorate(&#x27;server&#x27;, &#x27;seneca&#x27;, seneca);
    server.decorate(&#x27;server&#x27;, &#x27;action&#x27;, internals.action(server));

    server.decorate(&#x27;request&#x27;, &#x27;seneca&#x27;, internals.request(seneca), { apply: true });

    server.decorate(&#x27;reply&#x27;, &#x27;act&#x27;, internals.replies.act);
    server.decorate(&#x27;reply&#x27;, &#x27;compose&#x27;, internals.replies.compose);

    server.handler(&#x27;act&#x27;, internals.handlers.act);
    server.handler(&#x27;compose&#x27;, internals.handlers.compose);

    return next();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

Lead Maintainer - [Wyatt Preul](https://github.com/geek)

### Usage

#### Plugin Registration

**chairo** is registered with a **hapi** server using the `server.<span class="apidocCodeKeywordSpan">register</span>()` method.
Once
registered it decorates the `server` object with a reference to the `seneca` object initialized
using the provided plugin options. Default plugin options:

* `seneca`: `false`
* `log`: `silent`
* `actcache`:
    * `active`: `false`
...</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.chairo.schema" id="apidoc.module.chairo.schema">module chairo.schema</a></h1>


    <h2>
        <a href="#apidoc.element.chairo.schema.action" id="apidoc.element.chairo.schema.action">
        function <span class="apidocSignatureSpan">chairo.schema.</span>action
        <span class="apidocSignatureSpan">(options, message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">action = function (options, message) {

    const result = Joi.validate(options, internals.action);
    Hoek.assert(!result.error, message);
    return result.value;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

			return reply(result);
		});
	}
});
```

#### `server.<span class="apidocCodeKeywordSpan">action</span>(name, pattern, [options])`

Maps a **Seneca** action pattern to a **hapi**
[server method](https://github.com/hapijs/hapi/blob/master/API.md#servermethodname-method-options)
 where:
- `name` - the server method name (same as the name used in `server.method()`).
- `pattern` - the **Seneca** action pattern (e.g. `&#x27;generate:id&#x27;` or `{ generate: &#x27;id&#x27; }`) to map.
- `options` - optional settings options where:
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.chairo.schema.compose" id="apidoc.element.chairo.schema.compose">
        function <span class="apidocSignatureSpan">chairo.schema.</span>compose
        <span class="apidocSignatureSpan">(options, message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">compose = function (options, message) {

    const result = Joi.validate(options, internals.compose);
    Hoek.assert(!result.error, message);
    return result.value;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
server.route({
	method: &#x27;POST&#x27;,
	path: &#x27;/id&#x27;,
	handler: { act: &#x27;generate:id&#x27; }
});
```

#### `reply.<span class="apidocCodeKeywordSpan">compose</span>(template, context, [options])`

Renders a template view using the provided template and context where:
- `template` - the view engine template (same as the name used in
  [`reply.view()`](https://github.com/hapijs/hapi/blob/master/API.md#replyviewtemplate-context-options)).
- `context` - the context object used to render the template. `Chairo` provides a special key `$resolve` where you can map context
 variables to **Seneca** actions matching they key&#x27;s value pattern. Each of the services mapped to keys is resolved and the
 resultant key value maps are copied to the context root before redering the template.
- `options` - optional settings passed to `reply.view()`.
...</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
